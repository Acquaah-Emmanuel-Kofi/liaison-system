<section>
    <liaison-lecturer-students-header />

  @switch (studentsInternQuery.status()) { @case ('pending') { @if
  (studentsInternQuery.data()) {
    <ng-container *ngTemplateOutlet="table" />
  } @else {
    <liaison-table [columns]="columns" [data]="[]" [dataIsLoading]="true" />
  } } @case ('error') {
    <liaison-table [columns]="columns" [data]="[]" [errorOccurred]="true" />
  } @case ('success') {
    <ng-container *ngTemplateOutlet="table" />

  } }
</section>

<ng-template #table>
  <liaison-table
    [columns]="columns"
    [data]="searchTerm() ? filteredData() : studentsInternQuery.data()!"
    [first]="first()"
    [pageSize]="pageSize()"
    [totalData]="totalData()"
    [checked] = "checkStatus"
    (checkboxClicked)="openModal($event)"

    (pageChange)="handlePageChange($event)"
  />
</ng-template>

@if (showModal) {
  <liaison-modal-container [isOpen]="showModal" [title]="'Confirm Action'" (closeModal)="closeModal()" >
   <div class="w-full h-56 flex flex-col justify-center items-center gap-3">
     {{student.isSupervised}}
     @if (student.status === "SUPERVISED"){
       {{student.isSupervised}}
       <h3 class="text-[26px] font-bold">Do you want to mark this student as Not Supervised ?</h3>
     } @else {
       <h3 class="text-[26px] font-bold">Do you want to mark this student as Supervised ?</h3>
       {{student.isSupervised}}
     }
     <div class="mt-4 text-[20px]">
       <h3>{{ student.name }}</h3>
       <p>Supervision: {{ student.status |titlecase }}</p>
     </div>
     <div class="flex items-center gap-3 mt-5">
       <button class="bg-gray-100 text-black p-2 rounded" (click)="closeModal()">Cancel</button>
       <button class="bg-Dark-Blue text-white p-2 rounded" (click)="changeStatus()">Yes</button>
     </div>
   </div>
  </liaison-modal-container>
}
