<p-toast></p-toast>
<liaison-loader-modal [isOpen]="isLoading()"></liaison-loader-modal>

<header class="flex md:flex-row flex-col items-center justify-between my-6">
    <div class="flex gap-4">
        <liaison-searchbar placeholder="Search by name, id" (searchTermValue)="handleSearchTerm($event)" />
        <button type="button" (click)="toggleFilter()" [style.color]="toggledFilters ? '#19337E' : '#000000'"
            class="flex items-center gap-2 rounded-lg border border-[#D1D6E5] text-sm px-5 py-2 md:h-9 md:px-3">
            Filters

            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-chevron-down">
                <path [attr.d]="toggledFilters ? 'M6 9l6 6 6-6' : 'M18 15l-6-6-6 6'" />
            </svg>
        </button>
    </div>

    <button 
    type="button" (click)="downloadReport()"
      class="text-white border-2 rounded-full bg-[#19337E] border-[#19337E] font-medium text-sm px-6 py-1.5 text-center inline-flex items-center gap-3"       type="button">
     Download report

    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-hard-drive-download">
        <path d="M12 2v8" />
        <path d="m16 6-4 4-4-4" />
        <rect width="20" height="8" x="2" y="14" rx="2" />
        <path d="M6 18h.01" />
        <path d="M10 18h.01" />
    </svg>
   </button>
</header>

@if(toggledFilters) {
<div class="my-6 flex justify-between items-center pr-5 animate-fade-down animate-once">
    <div class="flex gap-4">
        <p-dropdown [options]="facultyFilterOptions" [(ngModel)]="selectedFaculty"
            (ngModelChange)="onFacultyChange($event)" optionLabel="name" optionValue="value"
            [placeholder]="'Filter by Faculty'"></p-dropdown>

        <p-dropdown [options]="departmentsFilterOptions" [(ngModel)]="selectedDepartment"
            (ngModelChange)="emitFilterValue()" optionLabel="name" optionValue="value"
            [placeholder]="'Filter by Department'"></p-dropdown>
    </div>

    <div class="flex gap-4">
        <button type="button" title="Reload Data" (click)="refetchData()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="#19337E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-list-restart">
                <path d="M21 6H3" />
                <path d="M7 12H3" />
                <path d="M7 18H3" />
                <path d="M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14" />
                <path d="M11 10v4h4" />
            </svg>
        </button>

        <button type="button" title="Clear Filters" (click)="clearFilters()"
            class="flex gap-1 items-center text-[#19337E]">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="#19337E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-circle-x">
                <circle cx="12" cy="12" r="10" />
                <path d="m15 9-6 6" />
                <path d="m9 9 6 6" />
            </svg>
            Clear
        </button>
    </div>
</div>
}
